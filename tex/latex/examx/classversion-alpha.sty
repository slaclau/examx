\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{classversion-alpha}[2022/02/03 Used for 
versioning classes]
\RequirePackage{xparse}
\RequirePackage{pgf}
\RequirePackage{readprov}
\RequirePackage{alphalph}

\def\classname#1{\gdef\@classname{#1} \title{Release information for 
\textsf{\@classname} class \classversion@currentRelease}}

\newcounter{classversion@file}
\setcounter{classversion@file}{0}


\NewDocumentCommand{\Release}{m}{
    \gdef\classversion@currentRelease{#1}
    \let\oldtitle\@title
%    \title{\oldtitle\space release\space\classversion@currentRelease}
}

\ExplSyntaxOn
\NewDocumentCommand{\IncludeFileInRelease}{m}{
    \stepcounter{classversion@file}
    \cs_new:cpx {file\alphalph{\theclassversion@file}} {#1}
    \ReadFileInfos{#1}
}
\ExplSyntaxOff

\NewDocumentCommand{\NumberOfFilesInRelease}{}{\theclassversion@file}

\NewDocumentCommand{\PrintReleaseFileInfo}{}{
    \newcounter{int}
    \setcounter{int}{0}
    
    \newtoks\tablines
    \newcommand{\addtomytablines}[1]{\tablines\expandafter{\the\tablines##1}}
    \loop
        \stepcounter{int}
        \expandafter\addtomytablines\expandafter{\number\arabic{int} &
             file\expandafter\alphalph{\number\arabic{int}} &
            \UseVersionOf{\csname 
            file\alphalph{\number\arabic{int}}\endcsname} &
            \UseDateOf{\csname 
            file\alphalph{\number\arabic{int}}\endcsname}\\}
    \ifnum \theint<\NumberOfFilesInRelease
    \repeat
    
    \begin{center}
    \begin{tabular}{l l l l}
        File number & File name & File version & File Date \\
        \the\tablines
    \end{tabular}
    \end{center}
}


%
%& \csname file\alphalph{\theint}\endcsname & 
%\UseVersionOf{\csname file\alphalph{\theint}\endcsname} 
%& \UseDateOf{\csname file\alphalph{\theint}\endcsname}